services:
  pdspi-config:
    image: txscience/pdspi-config:${TX_TAG}
    environment:
      MONGO_HOST: ${PDSPI_CONFIG_MONGO_HOST}
      MONGO_PORT: ${PDSPI_CONFIG_MONGO_PORT}
      MONGO_DATABASE: ${PDSPI_CONFIG_MONGO_DATABASE}
      MONGO_COLLECTION: ${PDSPI_CONFIG_MONGO_COLLECTION}
      MONGO_NON_ROOT_USERNAME: ${PDSPI_CONFIG_MONGO_NON_ROOT_USERNAME}
      MONGO_NON_ROOT_PASSWORD: ${PDSPI_CONFIG_MONGO_NON_ROOT_PASSWORD}
      DEFAULT_CONFIG: ${PDSPI_CONFIG_DEFAULT_CONFIG}
      PDS_HOST: ${PDS_HOST}
      PDS_PORT: ${PDS_PORT}
      PDS_VERSION: ${PDS_VERSION}
    port: 8080
    depends_on:
      - pdspi-config-mongodb
  pdspi-config-mongodb:
    image: txscience/tx-persistence:${TX_TAG}
    environment:
      MONGO_INITDB_ROOT_USERNAME: ${PDSPI_CONFIG_MONGO_INITDB_ROOT_USERNAME}
      MONGO_INITDB_ROOT_PASSWORD: ${PDSPI_CONFIG_MONGO_INITDB_ROOT_PASSWORD}
      MONGO_INITDB_DATABASE: ${PDSPI_CONFIG_MONGO_INITDB_DATABASE}
      MONGO_NON_ROOT_USERNAME: ${PDSPI_CONFIG_MONGO_NON_ROOT_USERNAME}
      MONGO_NON_ROOT_PASSWORD: ${PDSPI_CONFIG_MONGO_NON_ROOT_PASSWORD}
    port: 8080



